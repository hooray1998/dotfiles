"=================================================================
"		Vim-plug æ’ä»¶ç®¡ç†       
"=================================================================

call plug#begin('~/.vim/plugged')
"======================================="
"GTags
"å¤šç”¨c-w ] ä»£æ›¿c-]
"Plug 'ludovicchabant/vim-gutentags'
"AsyncRun shell command
Plug 'skywind3000/asyncrun.vim'
"Async syntax check
Plug 'w0rp/ale'
"better highlight for cpp"
Plug 'octol/vim-cpp-enhanced-highlight'
"leaderF"
Plug 'Yggdroot/LeaderF'
"ä½¿ç”¨- å¿«é€Ÿè¿›å…¥æ–‡ä»¶æµè§ˆå™¨"
Plug 'justinmk/vim-dirvish'
"å‡½æ•°å‚æ•°æé†’"ä¼¼ä¹ä¼šå¾ˆå¡
"Plug 'Shougo/echodoc.vim'
"======================================="
"å®ƒæ–°å®šä¹‰çš„æ–‡æœ¬å¯¹è±¡ä¸»è¦æœ‰ï¼š
"	i, å’Œ a, ï¼šå‚æ•°å¯¹è±¡ï¼Œå†™ä»£ç ä¸€åŠåœ¨ä¿®æ”¹ï¼Œç°åœ¨å¯ä»¥ç”¨ di, / ci, ä¸€æ¬¡æ€§åˆ é™¤/æ”¹å†™å½“å‰å‚æ•°
"	ii å’Œ ai ï¼šç¼©è¿›å¯¹è±¡ï¼ŒåŒä¸€ä¸ªç¼©è¿›å±‚æ¬¡çš„ä»£ç ï¼Œå¯ä»¥ç”¨ vii é€‰ä¸­ï¼Œdii / cii åˆ é™¤æˆ–æ”¹å†™
"	if å’Œ af ï¼šå‡½æ•°å¯¹è±¡ï¼Œå¯ä»¥ç”¨ vif / dif / cif æ¥é€‰ä¸­/åˆ é™¤/æ”¹å†™å‡½æ•°çš„å†…å®¹
Plug 'kana/vim-textobj-user'
Plug 'kana/vim-textobj-indent'
Plug 'kana/vim-textobj-syntax'
Plug 'kana/vim-textobj-function', { 'for':['c', 'cpp', 'vim', 'java'] }
Plug 'sgur/vim-textobj-parameter'
"======================================="
""åŒ¹é…çš„æ‹¬å·æˆ–æ ‡ç­¾åŒæ—¶ä¿®æ”¹"
Plug 'tpope/vim-surround'  
" å·¥ç¨‹æ–‡ä»¶æµè§ˆ
Plug 'scrooloose/nerdtree'
" å¢åŠ ç¼©è¿›æŒ‡ç¤ºçº¿ "
Plug 'Yggdroot/indentLine'
" æ‹¬å·è¡¥å…¨ "
Plug 'jiangmiao/auto-pairs'
Plug 'tell-k/vim-autopep8'
" å¿«é€Ÿä»£ç æ³¨é‡Š
Plug 'scrooloose/nerdcommenter'
" tagbar, æ˜¾ç¤ºå‡½æ•° ä»¥åŠ å˜é‡æƒ…å†µ
"Plug 'majutsushi/tagbar'
" ç¾åŒ–çŠ¶æ€æ å’Œæ ‡ç­¾é¡µ "
Plug 'vim-airline/vim-airline'
Plug 'vim-airline/vim-airline-themes'
" å†™htmlåˆ©å™¨
Plug 'mattn/emmet-vim'
" Pending tasks list
Plug 'fisadev/FixedTaskList.vim'

" Markdown syntastic highlight
Plug 'godlygeek/tabular'
Plug 'plasticboy/vim-markdown'
" Markdown realtime preview
" `sudo npm -g install instant-markdown-d`
" Use :InstantMarkdownPreview  open the windows, using vpn will make it invalid
Plug 'suan/vim-instant-markdown'

Plug 'airblade/vim-gitgutter'
Plug 'tpope/vim-fugitive'
Plug 'mhinz/vim-signify'

"monokai theme
Plug 'patstockwell/vim-monokai-tasty'
"æ¨¡ç³Šæœç´¢fzf
Plug 'junegunn/fzf', { 'dir': '~/.fzf', 'do': './install --all'  } 
Plug 'junegunn/fzf.vim'
"è¶…å¼ºçš„è‡ªåŠ¨è¡¥å…¨
Plug 'Valloric/YouCompleteMe'
augroup load_ycm
	"å»¶æ—¶åŠ è½½"
    autocmd!
    autocmd InsertEnter * call plug#load('YouCompleteMe') | autocmd! load_ycm
augroup END
"æ‰“å­—æœºéŸ³æ•ˆ
Plug 'skywind3000/vim-keysound'

call plug#end()
"==================================================================

syntax on
set nu
set shiftwidth=4
"==================================================================
" æ˜¾ç¤ºç›¸å…³  
"==================================================================
set go=             " ä¸è¦å›¾å½¢æŒ‰é’®  
set guifont=Monaco:h16   " è®¾ç½®å­—ä½“  
autocmd InsertLeave * se nocul  " ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ  
autocmd InsertEnter * se cul    " ç”¨æµ…è‰²é«˜äº®å½“å‰è¡Œ  
set showcmd         " è¾“å…¥çš„å‘½ä»¤æ˜¾ç¤ºå‡ºæ¥ï¼Œçœ‹çš„æ¸…æ¥šäº›  
"set novisualbell    " ä¸è¦é—ªçƒ(ä¸æ˜ç™½)  
set laststatus=2    " å¯åŠ¨æ˜¾ç¤ºçŠ¶æ€è¡Œ(1),æ€»æ˜¯æ˜¾ç¤ºçŠ¶æ€è¡Œ(2)  

"ç¼–ç "
set fencs=utf-8,ucs-bom,shift-jis,gb18030,gbk,gb2312,cp936
set termencoding=utf-8
set encoding=utf-8
set fileencodings=ucs-bom,utf-8,cp936
set fileencoding=utf-8

"==================================================================
"  æ–°æ–‡ä»¶æ ‡é¢˜
"==================================================================
"æ–°å»º.c,.h,.sh,.javaæ–‡ä»¶ï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ 
autocmd BufNewFile *.cpp,*.[ch],*.py,*.sh,*.java exec ":call Settitle()" 
""å®šä¹‰å‡½æ•°Settitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ 
func Settitle() 
    "å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶ 
    if &filetype == 'sh' 
        call setline(1,"\#!/bin/bash") 
        call append(line(".")+6, "") 
	elseif &filetype == 'python' 
	else
		call setline(1, "/*************************************************************************") 
		call append(line("."), "    > File Name: ".expand("%")) 
		call append(line(".")+1, "    > Author:hooray") 
		call append(line(".")+2, "    > Mail:hoorayitt@gmail.com ") 
		call append(line(".")+3, "    > Created Time: ".strftime("%c")) 
		call append(line(".")+4, " ************************************************************************/") 
		call append(line(".")+5, "")
    endif
    if &filetype == 'cpp'
        call append(line(".")+6, "#include<iostream>")
        call append(line(".")+7, "using namespace std;")
        call append(line(".")+8, "")
    endif
    if &filetype == 'c'
        call append(line(".")+6, "#include<stdio.h>")
        call append(line(".")+7, "  ")
    endif
    if &filetype == 'python'
		call setline(1,"# -*- coding:utf-8 -*-") 
		call append(line("."), "".expand("")) 
		. normal G
    endif
    "æ–°å»ºæ–‡ä»¶åï¼Œè‡ªåŠ¨å®šä½åˆ°æ–‡ä»¶æœ«å°¾
    autocmd BufNewFile * normal G
endfunc 


"==================================================================="
"	å‡½æ•°æ³¨é‡Š
"==================================================================="
nnoremap <F1> :call SetComment()<CR>
""å®šä¹‰å‡½æ•°Settitleï¼Œè‡ªåŠ¨æ’å…¥æ–‡ä»¶å¤´ 
func SetComment() 
    "å¦‚æœæ–‡ä»¶ç±»å‹ä¸º.shæ–‡ä»¶ 
	if &filetype == 'python' 
        call append(line(".")-1, "") 
        call append(line(".")-1, "\#===============================================================") 
        "call append(line(".")-1, "\#   func_name:") 
        call append(line(".")-1, "\#    describe:  ") 
        call append(line(".")-1, "\#===============================================================") 
        call append(line(".")-1, "") 

		"æ‰¾åˆ°å‡½æ•°å
		". normal /def<CR>
		". normal wyaw
		. normal kkk$

    "autocmd BufNewFile * normal kkA
    "else 
	endif
    "æ–°å»ºæ–‡ä»¶åï¼Œè‡ªåŠ¨å®šä½åˆ°æ–‡ä»¶æœ«å°¾
    "autocmd BufNewFile * normal G
endfunc 


"==================================================================
"	å®ç”¨è®¾ç½®
"==================================================================

" è®¾ç½®å½“æ–‡ä»¶è¢«æ”¹åŠ¨æ—¶è‡ªåŠ¨è½½å…¥
set autoread
"ä»£ç è¡¥å…¨ 
set completeopt=preview,menu 
" è®¾å®šè¡¥å…¨è¡Œä¸º"
set wildmode=full

"å…è®¸æ’ä»¶  
"é€šè¿‡% å®ç°XMLæ ‡ç­¾çš„è·³è½¬"
set nocompatible
filetype plugin on
runtime macros/matchit.vim
"å…±äº«å‰ªè´´æ¿  
set clipboard+=unnamed 
"ä»ä¸å¤‡ä»½  
set nobackup
"è‡ªåŠ¨ä¿å­˜
set autowrite
set ruler					" æ˜¾ç¤ºçŠ¶æ€æ æ ‡å°º"
set cursorline              " çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ
set magic                   " è®¾ç½®é­”æœ¯
set guioptions-=T           " éšè—å·¥å…·æ 
set guioptions-=m           " éšè—èœå•æ 
" è®¾ç½®åœ¨çŠ¶æ€è¡Œæ˜¾ç¤ºçš„ä¿¡æ¯
set foldenable              " å¼€å§‹æŠ˜å 
set foldcolumn=0
set foldmethod=indent 
set foldlevel=3 
set foldlevelstart=99

" å»æ‰è¾“å…¥é”™è¯¯çš„æç¤ºå£°éŸ³
set noeb
" åœ¨å¤„ç†æœªä¿å­˜æˆ–åªè¯»æ–‡ä»¶çš„æ—¶å€™ï¼Œå¼¹å‡ºç¡®è®¤
set confirm
" è‡ªåŠ¨ç¼©è¿›
set autoindent
set cindent
" Tabé”®çš„å®½åº¦
set tabstop=4
" ç»Ÿä¸€ç¼©è¿›ä¸º4
set softtabstop=4
set shiftwidth=4
" ä¸è¦ç”¨ç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦
set noexpandtab
" åœ¨è¡Œå’Œæ®µå¼€å§‹å¤„ä½¿ç”¨åˆ¶è¡¨ç¬¦
set smarttab
" å†å²è®°å½•æ•°
set history=1000
"ç¦æ­¢ç”Ÿæˆä¸´æ—¶æ–‡ä»¶
set nobackup
set noswapfile
"æœç´¢å¿½ç•¥å¤§å°å†™
set ignorecase
" å¦‚æœæœ‰ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œåˆ™åˆ‡æ¢åˆ°å¤§å°å†™æ•æ„ŸæŸ¥æ‰¾
set smartcase
"æœç´¢é€å­—ç¬¦é«˜äº®
set hlsearch
set incsearch
"è¡Œå†…æ›¿æ¢
set gdefault
"è¯­è¨€è®¾ç½®
set langmenu=zh_CN.UTF-8
set helplang=cn
" å‘½ä»¤è¡Œï¼ˆåœ¨çŠ¶æ€è¡Œä¸‹ï¼‰çš„é«˜åº¦ï¼Œé»˜è®¤ä¸º1ï¼Œè¿™é‡Œæ˜¯2
set cmdheight=1
" ä¿å­˜å…¨å±€å˜é‡
set viminfo+=!
" å¸¦æœ‰å¦‚ä¸‹ç¬¦å·çš„å•è¯ä¸è¦è¢«æ¢è¡Œåˆ†å‰²
set iskeyword+=_,$,@,%,#,-
" å­—ç¬¦é—´æ’å…¥çš„åƒç´ è¡Œæ•°ç›®
set linespace=0
" å¢å¼ºæ¨¡å¼ä¸­çš„å‘½ä»¤è¡Œè‡ªåŠ¨å®Œæˆæ“ä½œ
set wildmenu
" ä½¿å›æ ¼é”®ï¼ˆbackspaceï¼‰æ­£å¸¸å¤„ç†indent, eol, startç­‰
set backspace=2
" å…è®¸backspaceå’Œå…‰æ ‡é”®è·¨è¶Šè¡Œè¾¹ç•Œ
set whichwrap+=<,>,h,l
" å¯ä»¥åœ¨bufferçš„ä»»ä½•åœ°æ–¹ä½¿ç”¨é¼ æ ‡ï¼ˆç±»ä¼¼officeä¸­åœ¨å·¥ä½œåŒºåŒå‡»é¼ æ ‡å®šä½ï¼‰
set mouse=a
set selection=exclusive
set selectmode=mouse,key
" é€šè¿‡ä½¿ç”¨: commandså‘½ä»¤ï¼Œå‘Šè¯‰æˆ‘ä»¬æ–‡ä»¶çš„å“ªä¸€è¡Œè¢«æ”¹å˜è¿‡
set report=0
" åœ¨è¢«åˆ†å‰²çš„çª—å£é—´æ˜¾ç¤ºç©ºç™½ï¼Œä¾¿äºé˜…è¯»
set fillchars=vert:\ ,stl:\ ,stlnc:\
" é«˜äº®æ˜¾ç¤ºåŒ¹é…çš„æ‹¬å·
set showmatch
" åŒ¹é…æ‹¬å·é«˜äº®çš„æ—¶é—´ï¼ˆå•ä½æ˜¯ååˆ†ä¹‹ä¸€ç§’ï¼‰
set matchtime=1
" å…‰æ ‡ç§»åŠ¨åˆ°bufferçš„é¡¶éƒ¨å’Œåº•éƒ¨æ—¶ä¿æŒ3è¡Œè·ç¦»
set scrolloff=3
" ä¸ºCç¨‹åºæä¾›è‡ªåŠ¨ç¼©è¿›
set smartindent
" é«˜äº®æ˜¾ç¤ºæ™®é€štxtæ–‡ä»¶ï¼ˆéœ€è¦txt.vimè„šæœ¬ï¼‰
au BufRead,BufNewFile *  setfiletype txt
filetype plugin indent on 
"æ‰“å¼€æ–‡ä»¶ç±»å‹æ£€æµ‹, åŠ äº†è¿™å¥æ‰å¯ä»¥ç”¨æ™ºèƒ½è¡¥å…¨
set completeopt=longest,menu
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
" CTagsçš„è®¾å®š  
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
let Tlist_Sort_Type = "name"    " æŒ‰ç…§åç§°æ’åº  
let Tlist_Use_Right_Window = 1  " åœ¨å³ä¾§æ˜¾ç¤ºçª—å£  
let Tlist_Compart_Format = 1    " å‹ç¼©æ–¹å¼  
let Tlist_Exist_OnlyWindow = 1  " å¦‚æœåªæœ‰ä¸€ä¸ªbufferï¼Œkillçª—å£ä¹Ÿkillæ‰buffer  
let Tlist_File_Fold_Auto_Close = 0  " ä¸è¦å…³é—­å…¶ä»–æ–‡ä»¶çš„tags  
let Tlist_Enable_Fold_Column = 0    " ä¸è¦æ˜¾ç¤ºæŠ˜å æ ‘  
autocmd FileType java set tags+=D:\tools\java\tags  
"autocmd FileType h,cpp,cc,c set tags+=D:\tools\cpp\tags  
let Tlist_Show_One_File=1            "ä¸åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„tagï¼Œåªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„
"è®¾ç½®tags  
set tags=tags  

""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"å…¶ä»–ä¸œä¸œ
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"é»˜è®¤æ‰“å¼€Taglist 
let Tlist_Auto_Open=1 
"""""""""""""""""""""""""""""" 
" Tag list (ctags) 
"""""""""""""""""""""""""""""""" 
let Tlist_Ctags_Cmd = '/usr/bin/ctags' 
let Tlist_Show_One_File = 1 "ä¸åŒæ—¶æ˜¾ç¤ºå¤šä¸ªæ–‡ä»¶çš„tagï¼Œåªæ˜¾ç¤ºå½“å‰æ–‡ä»¶çš„ 
let Tlist_Exit_OnlyWindow = 1 "å¦‚æœtaglistçª—å£æ˜¯æœ€åä¸€ä¸ªçª—å£ï¼Œåˆ™é€€å‡ºvim 
let Tlist_Use_Right_Window = 1 "åœ¨å³ä¾§çª—å£ä¸­æ˜¾ç¤ºtaglistçª—å£
" minibufexplæ’ä»¶çš„ä¸€èˆ¬è®¾ç½®
let g:miniBufExplMapWindowNavVim = 1
let g:miniBufExplMapWindowNavArrows = 1
let g:miniBufExplMapCTabSwitchBufs = 1
let g:miniBufExplModSelTarget = 1   


"=================================================================
"é”®ç›˜å‘½ä»¤
"=================================================================

"è®¾ç½®<leader>ä¸ºç©ºæ ¼é”®
let mapleader="\<Space>"

"é‡æ˜ å°„"
cnoremap <C-p> <Up>
cnoremap <C-n> <Down>

"å¿«é€Ÿéå†ç¼“å†²åŒº"
nnoremap <silent> <Tab> :bnext<CR>
nnoremap <silent> <S-Tab> :bprevious<CR>

"æ˜ å°„æ˜¾ç¤ºå½“å‰æ–‡ä»¶ç›®å½•çš„å¿«æ·é”®"
cnoremap <expr> %% getcmdtype( ) == ':' ? expand('%:h').'/' : '%%'

"æ’å…¥&&å‘½ä»¤æ¨¡å¼ä¸‹ä¸Šä¸‹å·¦å³
inoremap <C-h> <left>
inoremap <C-j> <down>
inoremap <C-k> <up>
inoremap <C-l> <right>
cnoremap <c-h> <left>
cnoremap <c-j> <down>
cnoremap <c-k> <up>
cnoremap <c-l> <right>
cnoremap <c-a> <Home>
cnoremap <c-e> <End>

"H,Lç§»åŠ¨åˆ°è¡Œé¦–è¡Œå°¾
map H ^
map L $
"å¯è§†æ¨¡å¼ä¸‹ç§»åŠ¨åˆ°è¡Œå°¾
vnoremap L $h

"ä¿å­˜æ–‡ä»¶
nnoremap <leader>w :w<CR>
nnoremap <leader>W :w !sudo tee % > /dev/null <CR>
nnoremap <leader>i :bd %<CR><CR>
nnoremap <leader>e :exit<CR>
"å¿«æ·å¤åˆ¶ç²˜è´´è‡³ç³»ç»Ÿ
nnoremap <C-A> ggVG"+y<CR>
"nnoremap <leader>v :r !pbpaste<CR>
"vnoremap <leader>c :w !pbcopy<CR><CR>
"æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
nnoremap <C-t> :tabnew .<CR>5j
nnoremap <leader>, gT
nnoremap <leader>. gt
nnoremap <leader>f :Files ~<CR>
nnoremap <silent> <Leader>b :Buffers<CR>
nnoremap <silent> <Leader>l :Lines<CR>

"è¿è¡Œcpp  å’Œ python, å…ˆæ¸…å±

nnoremap <leader>r :call RunCoding()<CR>
nnoremap <leader>m :call MakeCoding()<CR>
func! MakeCoding()
    if &filetype == 'cpp'
		exec ":AsyncRun g++ -Wall -O2 \"$(VIM_FILEPATH)\" -o \"$(VIM_FILEDIR)/$(VIM_FILENOEXT)\""
	elseif &filetype == 'c'
		exec ":AsyncRun gcc -Wall -O2 \"$(VIM_FILEPATH)\" -o \"$(VIM_FILEDIR)/$(VIM_FILENOEXT)\""
	else
    endif
endfunc 
func! RunCoding()
    if &filetype == 'cpp'||&filetype == 'c'
		exec ":AsyncRun -raw -cwd=$(VIM_FILEDIR) \"$(VIM_FILEDIR)/$(VIM_FILENOEXT)\""
	"elseif 
	elseif &filetype == 'python'
		" åˆ†è¡Œå†™ä¼šè¾“å…¥å¤šæ¬¡ç¡®è®¤ "
		exec "AsyncRun clear; echo '========================Runing==================';python %"
	elseif &filetype == 'sh'
		exec ":AsyncRun chmod +x %;./%"
	elseif &filetype == 'html'
		"exec "!open -a \"\/Applications\/Google\ Chrome.app\" %"
		exec "AsyncRun google-chrome %"
	elseif expand('%:e') == 'awk'
		exec "AsyncRun awk -f % ".expand('%:r').".data"
	else
		exec ":e %"
    endif
endfunc 

nnoremap <silent> <F5> <cr>
"æ¯”è¾ƒæ–‡ä»¶  
nnoremap <C-F4> :vert diffsplit 
"C,C++çš„è°ƒè¯•
nnoremap <C-F5> :call Rungdb()<CR>
func! Rungdb()
    exec "w"
    exec "!g++ % -g -o %<"
    exec "!gdb ./%<"
endfunc


"F8å¼€å¯å’Œå…³é—­æ ‘"
map <F8> :NERDTreeToggle<CR>
let NERDTreeChDirMode=1
"æ˜¾ç¤ºä¹¦ç­¾"
let NERDTreeShowBookmarks=1
"è®¾ç½®å¿½ç•¥æ–‡ä»¶ç±»å‹"
let NERDTreeIgnore=['\~$', '\.pyc$', '\.swp$']
"çª—å£å¤§å°"
let NERDTreeWinSize=25


"ç¼©è¿›æŒ‡ç¤ºçº¿"
"let g:indentLine_char='â”†'
"let g:indentLine_enabled = 1

"autopep8è®¾ç½®"
let g:autopep8_disable_show_diff=1

"let mapleader=','
map <F7> <leader>ci <CR>


"é—®é¢˜ï¼šæ€æ ·åœ¨vimä¸­å®ç°èŠ±æ‹¬å·å¼•å·è‡ªåŠ¨è¡¥å…¨ï¼ŒåŒ…æ‹¬htmlæ ‡ç­¾ï¼Ÿ

"è§£å†³åŠæ³•ï¼šåªè¦æŠŠä¸‹é¢ä¸¤æ®µä»£ç ç²˜è´´åˆ°~/.vimrcä¸­ï¼Œå°±å¯ä»¥å®ç°æ‹¬å·è¶…å¼ºè¡¥å…¨

"<!--æ‹¬å·å¼•å·è¡¥å…¨ä»£ç {{{-->
" æ‹¬å·å¼•å·è¡¥å…¨
"<!--}}}-->

"<!--htmlæ ‡ç­¾è‡ªåŠ¨è¡¥å…¨{{{-->
" htmlè‡ªåŠ¨è¡¥å…¨
"autocmd BufNewFile *  setlocal filetype=html
"function! InsertHtmlTag()
"let pat = '\c<\w\+\s*\(\s\+\w\+\s*=\s*[''#$;,()."a-z0-9]\+\)*\s*>'
"normal! a>
"let save_cursor = getpos('.')
"let result = matchstr(getline(save_cursor[1]), pat)
"if (search(pat, 'b', save_cursor[1]))
	"normal! lyiwf>
	"normal! a</
	"normal! p
	"normal! a>
"endif
":call cursor(save_cursor[1], save_cursor[2], save_cursor[3])
"endfunction
"inoremap > <ESC>:call InsertHtmlTag()<CR>a<CR><Esc>O
"<!--}}}-->

"ä¹‹æ‰€ä»¥è¿™é‡Œçš„æ‹¬å·è¡¥å…¨ä»£ç ä¸­çš„å‡½æ•°å®ç°ååŒ¹é…
"å½“æ‰“å…¥(è¾“å…¥å†…å®¹)ï¼Œå†æŒ‰)ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æŸ¥å‰é¢æ˜¯å¦å·²ç»æœ‰åŒ¹é…çš„æ‹¬å·
"å¦‚æœæœ‰å°±ä¸å†é”®å…¥)ï¼Œè€Œæ˜¯ç›´æ¥è·³å‡º

"æˆ–è®¸ä½ å¾—åŠ ï¼š
set autoindent
set cindent



"è·³è½¬è‡³å…¶css
function! JumpToCSS()
let id_pos = searchpos("id", "nb", line('.'))[1]
let class_pos = searchpos("class", "nb", line('.'))[1]

if class_pos > 0 || id_pos > 0
if class_pos < id_pos
  execute ":vim '#".expand('<cword>')."' **/*.css"
elseif class_pos > id_pos
  execute ":vim '.".expand('<cword>')."' **/*.css"
endif
endif
endfunction

nnoremap <leader>]  :call JumpToCSS()<CR>


"new ycm"
let g:ycm_add_preview_to_completeopt = 0
let g:ycm_show_diagnostics_ui = 0
let g:ycm_server_log_level = 'info'
let g:ycm_min_num_identifier_candidate_chars = 2
"let g:ycm_collect_identifiers_from_comments_and_strings = 1
let g:ycm_complete_in_strings=1
let g:ycm_key_invoke_completion = '<c-z>'
set completeopt=menu,menuone
 
noremap <c-z> <NOP>
 
let g:ycm_semantic_triggers =  {
            \ 'c,cpp,python,java,go,erlang,perl': ['re!\w{2}'],
            \ 'cs,lua,javascript': ['re!\w{2}'],
            \ }
"YouCompleteMe for Ubuntu
let g:ycm_collect_identifiers_from_tags_files = 1
let g:ycm_collect_identifiers_from_comments_and_strings = 1
let g:syntastic_ignore_files=[".*\.py$"]
let g:ycm_seed_identifiers_with_syntax = 1
let g:ycm_complete_in_comments = 1
let g:ycm_confirm_extra_conf = 0
let g:ycm_global_ycm_extra_conf='~/.vim/bundle/YouCompleteMe/third_party/ycmd/.ycm_extra_conf.py'
"YouCompleteMe for mac
"let g:ycm_complete_in_comments = 0 "æ³¨é‡Šä¸­è¡¥å…¨
"let g:ycm_collect_identifiers_from_tags_files = 1
"let g:ycm_collect_identifiers_from_comments_and_strings = 1
"let g:syntastic_ignore_files=[".*\.py$"]
"let g:ycm_seed_identifiers_with_syntax = 1
"let g:ycm_complete_in_comments = 1
"let g:ycm_confirm_extra_conf = 0
"let g:ycm_server_python_interpreter='/usr/local/bin/python3'
"let g:ycm_global_ycm_extra_conf='/Users/iff/.vim/bundle/YouCompleteMe/third_party/ycmd/examples/.ycm_extra_conf.py'

let Tlist_Auto_Highlight_Tag=1  
let Tlist_Auto_Open=1  
let Tlist_Auto_Update=1  
let Tlist_Display_Tag_Scope=1  
let Tlist_Exit_OnlyWindow=1  
let Tlist_Enable_Dold_Column=1  
let Tlist_File_Fold_Auto_Close=1  
let Tlist_Show_One_File=1  
let Tlist_Use_Right_Window=1  
let Tlist_Use_SingleClick=1  

filetype plugin on  
autocmd FileType python set omnifunc=pythoncomplete#Complete  
autocmd FileType javascrÄ«pt set omnifunc=javascriptcomplete#CompleteJS  
autocmd FileType html set omnifunc=htmlcomplete#CompleteTags  
autocmd FileType css set omnifunc=csscomplete#CompleteCSS  
autocmd FileType xml set omnifunc=xmlcomplete#CompleteTags  
autocmd FileType php set omnifunc=phpcomplete#CompletePHP  
autocmd FileType c set omnifunc=ccomplete#Complete  


let g:pydiction_location='~/.vim/bundle/pydiction/complete-dict'  
set autoindent

"tagbar
""F9è§¦å‘ï¼Œè®¾ç½®å®½åº¦ä¸º30
"let g:tagbar_width = 25
"nmap <F9> :TagbarToggle<CR>
"å¼€å¯è‡ªåŠ¨é¢„è§ˆ(éšç€å…‰æ ‡åœ¨æ ‡ç­¾ä¸Šçš„ç§»åŠ¨ï¼Œé¡¶éƒ¨ä¼šå‡ºç°ä¸€ä¸ªå®æ—¶çš„é¢„è§ˆçª—å£)
"let g:tagbar_autopreview = 1
""å…³é—­æ’åº,å³æŒ‰æ ‡ç­¾æœ¬èº«åœ¨æ–‡ä»¶ä¸­çš„ä½ç½®æ’åº
"let g:tagbar_sort = 0
"
"tagbar æ›¿ä»£å“leaderF, ç›¸å…³åŠŸèƒ½å’Œfzfç±»ä¼¼
nnoremap <F9> :LeaderfFunction!<CR>
"let g:Lf_ShortcutF = '<c-p>'
"let g:Lf_ShortcutB = '<m-n>'
"noremap <c-n> :LeaderfMru<cr>
"noremap <m-p> :LeaderfFunction!<cr>
"noremap <m-n> :LeaderfBuffer<cr>
"noremap <m-m> :LeaderfTag<cr>
"let g:Lf_StlSeparator = { 'left': '', 'right': '', 'font': '' }

"let g:Lf_RootMarkers = ['.project', '.root', '.svn', '.git']
"let g:Lf_WorkingDirectoryMode = 'Ac'
"let g:Lf_WindowHeight = 0.30
"let g:Lf_CacheDirectory = expand('~/.vim/cache')
"let g:Lf_ShowRelativePath = 0
"let g:Lf_HideHelp = 1
"let g:Lf_StlColorscheme = 'powerline'
"let g:Lf_PreviewResult = {'Function':0, 'BufTag':0}



"airline options

if !exists('g:airline_symbols')
let g:airline_symbols = {}
endif

" powerline symbols
let g:airline_left_sep = 'î‚°'
let g:airline_left_alt_sep = 'î‚±'
let g:airline_right_sep = ''   "'î‚²'
let g:airline_right_alt_sep = 'î‚³'
let g:airline_symbols.branch = 'î‚ '
let g:airline_symbols.readonly = 'î‚¢'
let g:airline_symbols.linenr = 'â˜°'
let g:airline_symbols.maxlinenr = 'î‚¡'

let g:airline_powerline_fonts=1
set laststatus=2 "1ä¸ºå…³é—­åº•éƒ¨çŠ¶æ€æ  2ä¸ºå¼€å¯"
set t_Co=256     "ç»ˆç«¯å¼€å¯256è‰²æ”¯æŒ"
set ambiwidth=double "é˜²æ­¢ç‰¹æ®Šç¬¦å·æ— æ³•æ­£å¸¸æ˜¾ç¤º
let g:airline#extensions#tabline#enabled=1 "é¡¶éƒ¨tabæ˜¾ç¤º
"let g:airline_theme='bubblegum'  "murmuré…è‰²ä¹Ÿä¸é”™
"


"è®¾ç½®æ‰“å­—æœºéŸ³æ•ˆ
let g:keysound_enable = 1
"è®¾ç½®é»˜è®¤éŸ³æ•ˆä¸»é¢˜ï¼Œå¯ä»¥é€‰æ‹©ï¼šdefault, typewriter, mario, bubble, sword
let g:keysound_py_version = 3
let g:keysound_volume = 1000
let g:keysound_theme = 'typewriter'

"C-l æ¸…é™¤é«˜äº®
nnoremap <silent> <C-l> :<C-u>nohlsearch<CR><C-l>


" é‡å®šä¹‰*, ä½¿å…¶é‚£èƒ½å¤Ÿæœç´¢é€‰ä¸­æ–‡æœ¬
xnoremap * : <C-u> call <SID>VSetSearch()<CR>/<C-R>=@/<CR><CR>
xnoremap # : <C-u> call <SID>VSetSearch()<CR>?<C-R>=@/<CR><CR>

function! s:VSetSearch()
let temp = @s
norm! gv"sy
let @/ = '\V' . substitute(escape(@s, '/\'), '\n', '\\n', 'g')
let @s = temp
endfunction



" è®¾ç½®é…è‰²æ–¹æ¡ˆ
set background=dark
"let g:vim_monokai_tasty_italic = 1 "åŠ ä¸Šè¿™å¥å æ³¨é‡Šä¼šæœ‰åº•è‰²ï¼Œå¾ˆä¸‘"
colorscheme vim-monokai-tasty
let g:lightline = { 'colorscheme': 'monokai_tasty', }
let g:airline_theme='monokai_tasty'

" tasklist.vim  ä»»åŠ¡åˆ—è¡¨æ’ä»¶ <leader>t
let g:tlTokenList = ["FIXME",  "TODO", "QSTN", "HACK", "NOTE", "WARN", "MODIFY"]
"å¦‚æœè®¾ç½®ä¸º1ï¼Œåˆ™ä»»åŠ¡æ’ä»¶ä¸‹æ¬¡æ‰“å¼€æ—¶ä¼šæ¢å¤åˆ°ä¸Šæ¬¡å…³é—­æ—¶çš„ä½ç½®. é»˜è®¤æ˜¯æ‰¾åˆ°ç¦»å…‰æ ‡å½“å‰è¡Œæœ€è¿‘çš„æ ‡ç¤ºç¬¦ï¼Œå¯ä»¥å¦‚ä¸‹æ›´æ”¹:
let g:tlRememberPosition = 1

"======================================================="
"	For Python
"======================================================="
nnoremap <leader>p Iprint($a)^j
nnoremap <leader>P Iprint("$a")^j




" Signify ------------------------------

" this first setting decides in which order try to guess your current vcs
" UPDATE it to reflect your preferences, it will speed up opening files
let g:signify_vcs_list = [ 'git', 'hg' ]
" mappings to jump to changed blocks
nmap <leader>d <plug>(signify-next-hunk)
nmap <leader>D <plug>(signify-prev-hunk)
" nicer colors
highlight DiffAdd           cterm=bold ctermbg=none ctermfg=119
highlight DiffDelete        cterm=bold ctermbg=none ctermfg=167
highlight DiffChange        cterm=bold ctermbg=none ctermfg=227
highlight SignifySignAdd    cterm=bold ctermbg=237  ctermfg=119
highlight SignifySignDelete cterm=bold ctermbg=237  ctermfg=167
highlight SignifySignChange cterm=bold ctermbg=237  ctermfg=227

" FileFormat ================================= "
command! Format :call FileFormat()
func FileFormat() 
	if &filetype == 'python' 
		exec "!python ~/.local/config/FormatPython.py %"
	endif
endfunc 

" å¯æ˜¯æ¨¡å¼ä¸‹fé”®ç¿»è¯‘é€‰ä¸­åŒºåŸŸ
vnoremap f y:AsyncRun $HOME/.local/config/search_and_record.sh "\|awk -f $HOME/.local/config/simplify.awk 
nnoremap <C-f> yaw:AsyncRun $HOME/.local/config/search_and_record.sh "\|awk -f $HOME/.local/config/simplify.awk 
inoremap <C-f> yaw:AsyncRun $HOME/.local/config/search_and_record.sh "\|awk -f $HOME/.local/config/simplify.awk 

" markdown "
let g:instant_markdown_autostart = 0

"let g:table_mode_corner="|"
"nnoremap <leader>m :update<Bar>silent!start %:p<CR>
"=================================================================
"	other
"=================================================================

"è¿½åŠ è¯¥è¡Œåˆ°æ–‡ä»¶study
"nnoremap <leader>j :.w >> ~/study<CR>
"vnoremap <leader>j :w >> ~/study<CR>


"=================================================================
"	new
"=================================================================
"ctags
set tags=./.tags;,.tags
" for gutentags"
" gutentags æœç´¢å·¥ç¨‹ç›®å½•çš„æ ‡å¿—ï¼Œç¢°åˆ°è¿™äº›æ–‡ä»¶/ç›®å½•åå°±åœæ­¢å‘ä¸Šä¸€çº§ç›®å½•é€’å½’
let g:gutentags_project_root = ['.root', '.svn', '.git', '.hg', '.project']
 
" æ‰€ç”Ÿæˆçš„æ•°æ®æ–‡ä»¶çš„åç§°
let g:gutentags_ctags_tagfile = '.tags'
 
" å°†è‡ªåŠ¨ç”Ÿæˆçš„ tags æ–‡ä»¶å…¨éƒ¨æ”¾å…¥ ~/.cache/tags ç›®å½•ä¸­ï¼Œé¿å…æ±¡æŸ“å·¥ç¨‹ç›®å½•
let s:vim_tags = expand('~/.cache/tags')
let g:gutentags_cache_dir = s:vim_tags
 
" é…ç½® ctags çš„å‚æ•°
let g:gutentags_ctags_extra_args = ['--fields=+niazS', '--extra=+q']
let g:gutentags_ctags_extra_args += ['--c++-kinds=+px']
let g:gutentags_ctags_extra_args += ['--c-kinds=+px']

"for asyncrun"
" è‡ªåŠ¨æ‰“å¼€ quickfix window ï¼Œé«˜åº¦ä¸º 6
let g:asyncrun_open = 10

" ä»»åŠ¡ç»“æŸæ—¶å€™å“é“ƒæé†’
let g:asyncrun_bell = 1

" è®¾ç½® F10 æ‰“å¼€/å…³é—­ Quickfix çª—å£
nnoremap <F10> :call asyncrun#quickfix_toggle(6)<cr>



"for the left of vim-signify
set signcolumn=yes

"for cpp highlight
let g:cpp_class_scope_highlight = 1
let g:cpp_member_variable_highlight = 1
let g:cpp_class_decl_highlight = 1
let g:cpp_experimental_template_highlight = 1
let g:cpp_concepts_highlight = 1

"newtw"
let NERDTreeHijackNetrw=1

"for echodoc.vim"  ä½¿ç”¨<C-y>
set noshowmode


"for ale
"let g:ale_linters_explicit = 1
let g:ale_sign_error = 'âœ—'
let g:ale_sign_warning = 'âš¡'
let g:ale_set_highlights = 0
let g:ale_completion_delay = 500
let g:ale_echo_delay = 20
let g:ale_lint_delay = 500
let g:ale_echo_msg_format = '%code: %%s'
let g:ale_lint_on_text_changed = 'never'
let g:airline#extensions#ale#enabled = 1
 
let g:ale_c_gcc_options = '-Wall -O2 -std=c99'
let g:ale_cpp_gcc_options = '-Wall -O2 -std=c++14'
let g:ale_c_cppcheck_options = ''
let g:ale_cpp_cppcheck_options = ''
nnoremap <leader>S <Plug>(ale_previous_wrap)
nnoremap <leader>s <Plug>(ale_next_wrap)

"for ale format"
"autocmd FileType python noremap <buffer> <F5> :ALEFix<CR>
"let g:ale_fixers = { 'python': ['add_blank_lines_for_python_control_statements','autopep8','isort','yapf','remove_trailing_lines','trim_wh' }
nnoremap <F4> :call SwitchHeaderOrSource()<CR>
function SwitchHeaderOrSource()
	if expand("%:e") == "cpp"
		exec ":e ".expand("%:t:r").expand(".h")
	else
		exec ":e ".expand("%:t:r").expand(".cpp")
	endif
endfunc
